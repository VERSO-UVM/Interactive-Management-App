{% extends 'base.html' %}
{% import "bootstrap/wtf.html" as wtf %}


{% import "bootstrap/wtf.html" as wtf %}
{# Imports 'wtf.html' from the 'bootstrap' directory with an alias 'wtf' #}

{% block title %}
Result Page
{% endblock %}

{% block styles %}
  {{ super() }}
  <link rel="stylesheet" href="{{ url_for('static', filename='css/result.css') }}">
<!-- Include Cytoscape.js library -->
<script src="https://unpkg.com/cytoscape/dist/cytoscape.min.js"></script>
<script src="https://unpkg.com/dagre@0.7.4/dist/dagre.js"></script>
<script src="static/cytoscape-dagre.js"></script>

<style>

    #cy {
				z-index: 999;
                width: 80%;
                height:80%;
                position: absolute;
                top: 8%; left:-15%; 
    }
    #surrond
    {
        background-color: yellow;
    }
 
 
</style>
<script>
    // After including Cytoscape.js and Cytoscape-Dagre layout extension
document.addEventListener('DOMContentLoaded', function(){ 
    $.get('/nameList', function(x) 
    {
        let dataFactorTitle = x;
        let myList=[];
        for (var i = 0; i < dataFactorTitle.length; i++) 
        {
            myList.push({data:{id:String(i),label:dataFactorTitle[i]}})
        }
        $.get('/confusionList', function(x) 
        {
            let edgeInfo = x;
            let edgeList=[];
            console.log(edgeList)   
            for (var i = 0; i < edgeInfo.length; i+=2) 
            {
            edgeList.push({ data: { source: String(edgeInfo[i]), target: String(edgeInfo[i+1]) }})
            }


        console.log(edgeList)   
        let cy = cytoscape({
                    container: document.getElementById('cy'),
                    boxSelectionEnabled: false,
                    autounselectify: true,
                    layout: { name: 'dagre',rankDir: 'LR',fit: true, padding: 10},
                    style: 
                    [
                        {
                            selector: 'node',
                            style: {
                                'background-color': '#11479e',
                                'content': 'data(label)'
                            }
                        },
                        {
                            selector: 'edge',
                            style: {
                                'width': 1,
                                'target-arrow-shape': 'triangle',
                                'line-color': '#9dbaea',
                                'target-arrow-color': '#9dbaea',
                                'curve-style': 'bezier'
                            }
                        }
                    ],
                    elements: 
                    {
                        nodes: myList,
                        edges: edgeList
                    }
                });


            });
        });     
    });
    </script>

{% endblock %}


{% block content %}

<div class="grid-container">
   <div class="resultsContainer">
        <div class="resultPage"></div>
    </div>
</div>
<div id="surrond">
<div id="cy" >
</div>
</div>



{% endblock %}

{% extends 'base.html' %}  {# Extends the 'base.html' template #}
{% import "bootstrap/wtf.html" as wtf %}  {# Imports 'wtf.html' from the 'bootstrap' directory with an alias 'wtf' #}

{% block styles %}
  {{ super() }}
  <link rel="stylesheet" href="{{ url_for('static', filename='css/result.css') }}">
{% endblock %}

{% block title %}
Result Page  {# Sets the title of the page to "Factor Page" #}
{% endblock %}

<link rel="stylesheet" href="result.css">

{% block content %}
<div class="grid-container">
    <div class="resultPage">
        <h1 class="pt-5 pb-2">Final Results</h1>
    </div>

    <div class="results">
        <div class="resultsContainer">
            <div class="box" id="graph" >
                <img src="{{ url_for('static', filename=filepath) }}" alt="Graph" class="img-fluid">
            </div> <!-- Container for the graph -->
        </div>
    </div>

    <div class="saveImage">
        <p><button class="savePNG" onclick="saveImage()">Save as PNG</button></p>
    </div>
</div>

<script>
function saveImage() {
    // Get the image URL from the src attribute of the img tag
    var imageURL = document.querySelector('#graph img').src;
    
    // Create an <a> element for the download
    var downloadLink = document.createElement('a');
    downloadLink.href = imageURL;
    downloadLink.download = 'Graph.png'; // The name of the downloaded file
    
    // Append the link to the body, click it, and then remove it
    document.body.appendChild(downloadLink);
    downloadLink.click();
    document.body.removeChild(downloadLink);
}
</script>

{% endblock %}